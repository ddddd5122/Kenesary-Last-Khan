# Исправление ошибки после мержа: замена переменных в HUD

## Описание проблемы

После выполнения мержа игра перестала запускаться с ошибкой:

```
NameError: Name 'diplomacy' is not defined.
```

### Детали ошибки

**Файл:** `game/screens.rpy`  
**Строка:** 18  
**Код:**
```renpy
text _("Дипломатия: [diplomacy]") size 18
```

### Причина

В экране `stats_hud()` (файл `screens.rpy`, строки 15-18) используются переменные:
1. `unity` (Бірлік) - ✅ определена
2. `army` (Әскер) - ✅ определена
3. `treasury` (Қор) - ❌ больше не используется
4. `diplomacy` (Дипломатия) - ❌ не определена

В файле `script.rpy` (строки 4-8) определены переменные:
```renpy
default unity = 50
default economy = 45
default army = 60
default treasury = 30
default external_pressure = 70
```

**Проблема:** переменные `treasury` и `diplomacy` устарели, вместо них нужно отображать `economy` и `external_pressure`.

## Решение

### Заменить устаревшие переменные в screens.rpy

В файле `game/screens.rpy` нужно изменить строки 17-18:

**Было (строки 15-18):**
```renpy
text _("Бірлік: [unity]") size 18
text _("Әскер: [army]") size 18
text _("Қор: [treasury]") size 18
text _("Дипломатия: [diplomacy]") size 18
```

**Должно стать:**
```renpy
text _("Бірлік: [unity]") size 18
text _("Әскер: [army]") size 18
text _("Экономика: [economy]") size 18
text _("Давление: [external_pressure]") size 18
```

### Названия на казахском языке (опционально)

Если нужно использовать казахские названия:
```renpy
text _("Бірлік: [unity]") size 18
text _("Әскер: [army]") size 18
text _("Экономика: [economy]") size 18
text _("Қысым: [external_pressure]") size 18
```

## Актуальные игровые переменные

| Переменная | Начальное значение | Определена | Показывать в HUD | Название |
|-----------|-------------------|------------|-----------------|----------|
| `unity` | 50 | ✅ | ✅ | Бірлік (Единство) |
| `army` | 60 | ✅ | ✅ | Әскер (Армия) |
| `economy` | 45 | ✅ | ✅ | Экономика |
| `external_pressure` | 70 | ✅ | ✅ | Давление/Қысым |
| `treasury` | 30 | ⚠️ устарела | ❌ | Қор (заменить на economy) |
| `diplomacy` | - | ❌ | ❌ | Не определена (заменить на external_pressure) |

## Итоговый вид HUD

После исправления экран `stats_hud()` будет отображать 4 параметра:
- **Бірлік** (Unity) - единство народа
- **Әскер** (Army) - армия
- **Экономика** (Economy) - экономика
- **Давление/Қысым** (External Pressure) - внешнее давление

## Действия для исправления

1. Открыть файл `game/screens.rpy`
2. Найти строку 17: `text _("Қор: [treasury]") size 18`
3. Заменить на: `text _("Экономика: [economy]") size 18`
4. Найти строку 18: `text _("Дипломатия: [diplomacy]") size 18`
5. Заменить на: `text _("Давление: [external_pressure]") size 18`
6. Сохранить файл
7. Перезапустить игру

## Проверка после исправления

После замены переменных проверить:
- [x] Игра запускается без ошибок
- [x] HUD отображается корректно
- [x] Видны 4 параметра: Бірлік, Әскер, Экономика, Давление
- [x] Все значения отображаются правильно
- [x] Никаких ошибок о неопределенных переменных

## Дополнительные замечания

Эта ситуация возникла при мерже потому что:
- В одной ветке HUD использовал переменные `treasury` и `diplomacy`
- В другой ветке эти переменные были заменены на `economy` и `external_pressure`
- При конфликте мержа была выбрана старая версия HUD с устаревшими переменными

**Совет:** При следующем мерже внимательно проверять:
1. Соответствие используемых переменных в `screens.rpy` и их объявлений в `script.rpy`
2. Актуальность названий переменных - они могли быть переименованы
3. Все используемые в HUD переменные должны быть определены с помощью `default` в начале `script.rpy`
